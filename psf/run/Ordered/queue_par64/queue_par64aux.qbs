#!/bin/bash
#PBS -M alsina@ifi.unicamp.br
#PBS -m abe
#PBS -N par144RAM
#PBS -e par144RAM.err
#PBS -o par144RAM.out
#PBS -q par144RAM
#PBS -l nodes=1:ppn=16

source /home/sw/masternode/intel/2015/install/composerxe/bin/compilervars.sh intel64
source /home/sw/masternode/intel/2015/install/mpi/impi/5.1.2.150/bin64/mpivars.sh

export I_MPI_HYDRA_BOOTSTRAP=rsh
export I_MPI_HYDRA_BOOTSTRAP_EXEC=/opt/pbs/bin/pbs_tmrsh
export I_MPI_DEVICE=rdssm

export PATH=/home/dfa/sobreira/alsina/sw/pyhton/2714/install/bin:$PATH
export PYTHONPATH=$PYTHONPATH:/home/dfa/sobreira/alsina/sw/galsim/install/lib/python2.7/site-packages
export PATH=/home/dfa/sobreira/alsina/sw/cfitsio/install/bin:$PATH
export LD_LIBRARY_PATH=/home/dfa/sobreira/alsina/sw/cfitsio/install/lib:/home/dfa/sobreira/alsina/sw/ccfits/25/install/lib:/home/dfa/sobreira/alsina/sw/tmv/install/lib:/home/dfa/sobreira/alsina/sw/boost/166/install/lib:$LD_LIBRARY_PATH

INSTALL=/home/dfa/sobreira/alsina/sw
START_PATH=/home/dfa/sobreira/alsina/DESWL/psf
INPUT_PATH=/home2/dfa/sobreira/alsina/catalogs
OUTPUT_PATH=/home2/dfa/sobreira/alsina/catalogs/output
TAG=y3a1-v29

cd /home/dfa/sobreira/alsina/DESWL/psf/run

List="277012 277014 277015 277017 277019 277021 277024 277025 277026 277027 277028 277029 277030 277032 277033 277035 277037 277040 277041 277043 277044 277045 277046 277047 277048 277049 277050 277051 277052 277053 277054 277055 277056 277057 277058 277059 277060 277061 277062 277063 277064 277065 277066 277067 277068 277069 277070 277071 277072 277073 277074 277075 277282 277283 277284 277285 277287 277288 277289 277290 277301 277303 277304 277305 277306 277308 277309 277310 277311 277313 277315 277319 277322 277340 277341 277343 277345 277347 277349 277351 277352 277357 277359 277362 277378 277379 277634 277637 277638 277640 277869 277872 277874 277875 277876 277877 277878 277879 277884 277885 277886 277888 277889 277891 277892 277893 277898 277899 277901 277907 278188 278191 278208 278209 278214 278217 278220 278228 278481 278482 278483 278484 278485 278486 278487 278488 278489 278490 278493 278494 278497 278498 278502 278506 278508 278509 278511 278515 278517 278518 278519 278521 278522 278523 278524 278525 278526 278527 278528 278530 278531 278532 278533 278534 278536 278537 278538 278546 278547 278548 278549 278550 278551 278553 278554 278555 278558 278559 278806 278810 278812 278813 278814 278815 278816 278824 278826 278828 278829 278830 278834 278835 278836 278838 278839 278840 278841 278844 278848 278852 278853 278854 278855 278858 278859 278860 278861 278863 278864 279431 279433 279434 279435 279436 279437 279438 279439 279441 279444 279445 279446 279447 279449 279450 279451 279453 279455 279456 279457 279458 279459 279460 279462 279463 279465 279466 279467 279469 279470 279471 279474 279475 279476 279479 279480 279491 279492 279493 279494 279495 279497 279498 279502 279503 279505 279507 279508 279510 279778 279779 279780 279781 279782 279783 279784 279785 279787 279788 279792 279796 279797 279798 279805 279806 279808 279809 279824 279825 279826 279827 279829 279831 279832 279833 279836 279837 279838 279839 279840 279843 279848 279849 279851 279852 279853 279855 279857 279858 279859 279860 280333 280335 280336 280340 280343 280344 280345 280346 280349 280351 280353 280354 280355 280356 280359 280360 280361 280362 280363 280365 280366 280367 280368 280369 280370 280371 280372 280373 280374 280376 280377 280379 280380 280382 280383 280384 280385 280680 280681 280682 280688 280690 280691 280693 280694 280696 280698 280700 280702 280703 280705 280706 280708 280711 280712 280714 280715 280716 280718 280719 280720 280722 280725 280726 280729 280730 280732 280733 280734 280735 280736 280738 280739 280740 280741 280742 280743 280744 280745 280746 280748 280749 280751 280752 280754 280755 280757 280758 281109 281110 281111 281113 281115 281117 281118 281120 281121 281122 281125 281127 281128 281129 281130 281131 281132 281133 281135 281136 281138 281142 281144 281145 281146 281148 281149 281150 281151 281152 281153 281154 281156 281157 281159 281160 281161 281162 281164 281165 281166 281168 281169 281171 281172 281173 281174 281175 281177 281178 281179 281180 281181 281182 281183 281184 281185 281187 281188 281597 281598 281599 281600 281602 281603 281604 281605 281608 281609 281611 281612 281614 281616 281619 281621 281623 281625 281626 281627 281628 281629 281631 281633 281634 281638 281639 281641 281642 281643 281644 281645 281647 281648 281650 281651 281652 281653 281654 281657 281659 281660 281661 281662 281663 281665 281666 281668 281670 281671 281673 281674 281676 281677 281679 281680 281681 281682 281683 281685 281686 281687 281689 281690 281694 281695 282042 282048 282050 282052 282055 282056 282058 282062 282063 282064 282065 282066 282068 282070 282072 282074 282075 282076 282077 282079 282081 282082 282084 282086 282088 282091 282092 282093 282094 282095 282096 282097 282098 282099 282100 282101 282102 282103 282104 282106 282107 282109 282110 282111 282112 282113 282114 282115 282117 282118 282119 282122 282124 282125 282126 282127 282128 282129 282130 282131 282133 282134 282135 282136 282138 282539 282540 282541 282542 282543 282544 282549 282550 282553 282554 282555 282556 282559 282560 282561 282562 282563 282564 282565 282566 282567 282568 282569 282570 282571 282572 282573 282574 282575 282576 282577 282578 282579 282580 282581 282582 282583 282584 282585 282586 282587 282588 282589 282590 282591 282592 282593 282594 282595 282596 282597 282598 282599 282600 282603 282604 282605 282607 282608 282612 282613 282614 282616 282617 282922 282923 282924 282925 282926 282927 282928 282929 282930 282931 282934 282936 282938 282939 282940 282941 282942 282943 282944 282945 282947 282948 282950 282953 282954 282955 282956 282957 282958 282959 282960 282961 282962 282963 282964 282966 282967 282968 282969 282970 282971 282972 282973 282974 282975 282976 282977 282978 282979 282980 282981 282982 282983 282984 282985 282986 282987 282988 282989 282990 282991 282992 282993 282994 282995 282996 282997 282998 282999 283000 283001 283002 283003 283004 283005 283006 283007 283008 283009 283375 283376 283377 283378 283379 283380 283381 283382 283383 283384 283385 283386 283387 283388 283389 283390 283391 283392 283393 283394 283395 283396 283397 283398 283399 283400 283401 283402 283403 283404 283405 283406 283407 283408 283416 283417 283430 283431 283432 283433 283434 283435 283436 283437 283439 283440 283442 283443 283444 283741 283742 283744 283749 283751 283752 283753 283756 283758 283767 283768 283769 283783 283787 283788 283789 283798 283799 283800 283801 283803 283805 283806 283808 283810 283811 283813 283815 283822 283823 283824 283825 283826 283827 283828 283829 283830 283831 283833 283834 283835 283836 283837 283838 283839 283840 283841 283842 283843 283844 283845 283846 283848 283850 283851 283852 283854 283855 283856 283857 345338 345339 345343 345346 345348 345349 345353 345354 345355 345356 345357 345359 345361 345363 345364 345365 345366 345369 345381 345382 345383 345384 345385 345391 345393 345395 348375 348376 348377 348378 348379 348380 348381 348382 348383 348384 348389 348390 348395 348397 348398 348402 348403 348404 348405 348406 348407 348408 348409 348410 348411 348412 348413 348415 348416 348417 348418 348419 348420 348425 348459 348816 348818 348819 348821 348822 348824 348825 348826 348827 348829 348830 348831 348833 348834 348836 348838 348839 348840 348841 348844 348846 348848 348850 348853 348854 348856 348858 348859 348860 348861 348863 348864 348866 348868 348869 348871 348872 348874 348876 348877 348878 348879 348881 348882 348883 348885 348886 348888 348889 348890 348891 348892 348894 348896 348897 348898 348899 348902 348903 348905 348907 348909 348910 348911 348912 348913 348915 348917 348918 348920 348921 348924 348926 348928 348930 348932 348934 348936 348937 348938 348942 348943 348947 348949 348952 348954 348955 348957 348958 348960 348962 348964 348965 348967 348969 348970 348972 349301 349303 349304 349306 349307 349309 349312 349313 349316 349317 349318 349320 349321 349323 349324 349328 349330 349337 349338 349340 349341 349343 349344 349345 349346 349347 349348 349349 349350 349351 349352 349353 349354 349356 349357 349358 349359 349360 349362 349363 349364 349365 349367 349368 349371 349372 349375 349376 349377 349378 349379 349380 349381 349382 349383 349385 349387 349388 349389 349390 349392 349393 349395 349396 349398 349399 349400 349401 349403 349404 349407 349409 349411 349412 349413 349414 349415 349416 349418 349427 349428 349429 349431 349432 349433 349434 349435 349437 349438 349441 349442 349444 349754 349755 349756 349758 349760 349762 349763 349765 349766 349768 349770 349772 349773 349774 349775 349777 349778 349780 349781 349783 349784 349785 349787 349789 349791 349793 349794 349795 349797 349798 349799 349800 349801 349802 349804 349810 349811 349813 349814 349815 349817 349819 349821 349822 349824 349826 349828 349829 349830 349832 349833 349834 349836 349838 349839 349841 349843 349845 349846 349847 349849 349850 349851 349853 349854 349855 349856 349857 349858 349859 349860 349861 349862 349863 349864 349865 349866 349867 349868 349869 349870 349871 349872 349873 349874 349875 349876 349877 349878 349879 349880 349881 349882 349883 349884 349885 349887 349888 349889 349890 349891 349892 349893 349894 349896 349898 349899 349900 349902 349903 349904 349905 349906 349907 349908 350134 350137 350138 350139 350141 350142 350145 350146 350148 350149 350151 350156 350158 350160 350161 350163 350164 350165 350166 350167 350168 350170 350171 350172 350173 350174 350175 350178 350179 350181 350184 350185 350187 350188 350190 350191 350193 350194 350195 350196 350198 350199 350201 350202 350204 350205 350207 350209 350210 350212 350213 350215 350216 350219 350220 350223 350224 350225 350226 350228 350231 350232 350235 350238 350239 350242 350245 350246 350248 350250 350251 350252 350253 350256 350257 350260 350261 350262 350264 350265 350266 350268 350270 350271 350273 350274 350275 350276 350277 350278 350279 350280 350281 350282 350283 350285 350286 350287 350290 350291 350292 350293 350294 350536 350538 350539 350541 350542 350543 350545 350546 350547 350548 350550 350552 350606 350608 350610 350611 350613 350853 350855 350857 350858 350860 350861 350863 350866 350868 350869 350871 350872 350875 350876 350878 350879 350880 350883 350884 350885 350886 350887 350888 350890 350891 350892 350893 350895 350897 350899 350901 350903 350905 350906 350907 350909 350910 350912 350916 350917 350918 350920 350922 350923 350924 350925 350926 350927 350928 350930 350931 350932 350934 350935 350936 350937 350939 350940 350943 350944 350946 350947 350948 350950 350952 350954 350955 350957 350958 350960 350961 350962 350963 350965 350967 350969 350970 350972 352818 352820 352821 352822 352826 352829 354927 354961 354963 354964 354967 354968 354972 354980 355196 355197 355198 355200 355204 355205 355206 355207 355208 355209 355211 355213 355214 355216 355217 355218 355220 355222 355223 355224 355227 355228 355230 355231 355233 355235 355236 355237 355239 355240 355242 355245 355246 355249 355250 355251 355252 355253 355254 355255 355256 355257 355258 355259 355260 355261 355262 355263 355264 355265 355267 355268 355269 355270 355271 355275 355276 355279 355280 355282 355284 355285 355296 355299 355300 355301 355303 355304 355305 355306 355307 355312 355314 355315 355318 355320 355323 355324 355326 355328 355330 355333 355334 355336 355337 355338 355339 355342 355350 355352 355353 355354 355356 355359 355391 355393 355395 355397 355399 355403 355406 355409 355411 355413 355416 355419 355422 355425 355427 355429 355430 355432 355436 355438 355440 355441 355444 355447 355450 355453 355454 355457 355459 355460 355461 355462 356231 356236 356237 358361 358362 358363 358374 358378 358380 358381 358384 358386 358387 358388 358390 358391 358393 358394 358396 358398 358399 358400 358401 358402 358404 358407 358408 358410 358411 358413 358414 358415 358416 358418 358419 358420 358434 358436 358438 358439 358441 358443 358446 358449 358451 358453 358455 358457 358458 358459 358462 358464 358468 358469 358470 358471 358473 358476 358477 358479 358481 358483 358495 358497 358498 358501 358502 358505 358507 358509 358510 359135 359136 359137 359138 359139 359140 359141 359142 359144 359145 359146 359149 359151 359152 359154 359155 359156 359158 359159 359160 359161 359162 359163 359164 359165 359166 359168 359169 359171 359172 359175 359177 359181 359182 359184 359186 359187 359189 359191 359192 359195 359198 359201 359202 359205 359207 359208 359210 359212 359213 359214 359215 359216 359218 359219 359221 359265 359266 359269 359270 359272 359275 359276 359278 359279 359281 359282 359284 359285 359287 359288 359290 359296 359298 359300 359306 359311 359312 359313 359317 359320 359321 359325 359328 359329 359348 360481 360483 360484 360485 360486 360487 360488 360489 360490 360492 360494 360495 360496 360497 360500 360502 360504 360507 360509 360510 360512 360513 360514 360515 360517 360518 360519 360520 360522 360523 360525 360526 360528 360529 360530 360532 360533 360547 360548 360550 360551 360553 360555 360556 360557 360558 360559 360562 360564 360565 360567 360568 360570 360572 360573 360575 360578 360579 360581 360582 360584 360586 360587 360588 360589 360590 360592 360593 360594 360596 360598 360599 360600 360601 360602 360604 360605 360606 360607 360608 360609 360610 360656 360657 360659 360662 360664 360665 360668 360670 360671 360674 360675 360677 360678 360680 360682 360683 360685 360686 360687 360688 360691 360692 360693 360695 360696 360698 360699 360701 360703 360704 360705 360708 360709 360711 360712 360713 361301 361309 361312 361314 361316 361317 361320 361321 361324 361326 361328 361329 361331 361334 361335 361496 361497 361499 361500 361501 361502 361503 361504 361505 361506 361507 361510 361511 361514 361515 361516 361520 361521 361523 361524 361526 361527 361528 361530 361531 361532 361533 361534 361536 361537 361539 361540 361541 361542 361545 361546 361547 361549 361550 361552 361554 361556 361557 361558 361560 361561 361563 361564 361565 361567 361569 361571 361573 361575 361576 361577 361579 361581 361582 361584 361586 361588 361590 361591 361594 361595 361596 361598 361599 361600 361601 361603 361610 361611 361612 361613 361614 361615 361616 361651 361652 361655 361658 361659 361661 361662 361664 361666 361669 361670 361673 361674 361675 361676 361677 361679 361681 361682 361683 361685 361687 361688 361689 361690 361691 361692 361693 361694 361695 361696 361698 361699 361700 361701 361703 361704 361705 361707 361708 361710 361711 361712 361715 361718 361720 361721 361723 361726 361727 361729 361730 361731 361732 361733 361883 361884 361886 361887 361888 361889 361890 361891 361892 361894 361896 361898 361899 361902 361904 361905 361908 361909 361910 361912 361989 361991 361992 362005 362007 362008 362017 362019 362020 362022 362024 362026 362027 362028 362030 362031 362033 362034 362037 362038 362040 362041 362043 362044 362045 362048 362049 362051 362052 362055 362056 362058 362060 362061 362063 362064 362066 362067 362069 362072 362073 362074 362076 362077 362078 362080 362081 362082 362085 362086 362087 362089 362091 362092 362100 362109 362110 362112 362113 362115 362116 362118 362119 362120 362122 362124 362126 362127 362130 362131 362132 362133 362134 362135 362136 362137 362138 362291 362292 362293 362295 362297 362298 362300 362301 362302 362304 362305 362306 362307 362308 362310 362311 362312 362313 362315 362316 362318 362319 362320 362321 362322 362323 362327 362329 362330 362332 362334 362335 362336 362337 362338 362339 362340 362341 362342 362344 362346 362348 362350 362352 362353 362354 362355 362356 362358 362359 362360 362361 362363 362364 362365 362366 362368 362369 362371 362372 362373 362374 362375 362377 362378 362380 362381 362382 362383 362384 362385 362387 362389 362390 362392 362393 362394 362396 362397 362399 362402 362403 362404 362406 362407 362409 362411 362413 362414 362415 362416 362417 362419 362420 362421 362422 362424 362425 362429 362431 362433 362434 362436 362439 362440 362442 362730 362731 362732 362733 362735 362738 362739 362740 362741 362742 362744 362745 362746 362751 362754 362756 362757 362758 362761 362763 362765 362768 362769 362771 362772 362776 362781 362782 362783 362784 362786 362787 362788 362789 362790 362792 362793 362794 362795 362796 362797 362799 362826 362827 362828 362829 362832 362833 362835 362836 362837 362838 362839 362842 362845 362846 362847 362848 362849 362850 362851 362852 362853 362855 362857 362858 362860 362885 362888 362890 362891 362893 362894 362896 362898 362899 362901 362902 362904 362905 362919 362921 362923 362924 362926 362927 362930 362931 362932 362934 362935 362936 362939 362940 362942 362943 362946 362947 362948 362949 362952 362953 362954 362955 362956 362958 362959 362962 362963 362964 362966 362967 362968 362970 362971 362974 362975 362976 362977 362978 362979 362980 363711 363712 363713 363714 363716 363717 363719 363720 363722 363723 363725 363726 363729 363730 363731 363732 363733 363736 363737 363738 363739 363740 363741 363742 363743 363745 363746 363747 363748 363750 363751 363752 363754 363755 363756 363757 363759 363760 363761 363762 363764 363766 363767 363768 363769 363771 363773 363774 363775 363778 363779 363780 363781 363782 363784 363785 363786 363788 363803 363804 363805 363807 363808 363810 363811 363813 363818 363820 363821 363823 363824 363825 363826 363827 363828 363830 363831 363832 363833 363835 363836 363837 363838 363839 363841 363842 363843 363844 363845 363847 363848 363849 363856 363857 363860 363862 363863 363865 363868 363869 363872 363873 363876 363879 363882 363884 363886 363889 363890 363891 363892 363896 363897 363898 363900 363901 363903 363904 363906 363907 363909 363911 363912 363914 363915 363917 363918 363919 363921 363922 363924 363926 363927 363929 363931 363932 363933 363935 363936 363938 363939 363941 363942 363943 363945 363946 363947 363950 363951 363952 363954 363955 363956 363958 363959 363961 363963 363964 363966 363967 363969 363970 363971 363973 363974 364146 364148 364150 364151 364153 364154 364156 364157 364158 364159 364160 364161 364162 364164 364165 364167 364168 364169 364170 364172 364173 364175"

for n in $List;
do
    $INSTALL/pyhton/2714/install/bin/python $START_PATH/run_rho2_outand.py --exps="$n" --tag=$TAG --work=$INPUT_PATH/$TAG --outpath=$OUTPUT_PATH/$TAG/allexp_byexp/"$n"/     
    wait
done
